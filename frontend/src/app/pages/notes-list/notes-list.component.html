<div class="header-row">
    <button mat-icon-button routerLink="/courses" aria-label="Back to courses">
        <mat-icon>arrow_back</mat-icon>
    </button>
    <h2>Notes for Course</h2>
</div>

<div *ngIf="loading" class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
</div>

<div *ngIf="error" class="error-message">
    <p>{{ error }}</p>
    <button mat-raised-button color="warn" (click)="fetchNotes(courseId!)">Retry</button>
</div>

<div *ngIf="!loading && !error" class="notes-list">
    <mat-card *ngFor="let note of notes" class="note-card clickable" [routerLink]="['/notes', note.id]">
        <mat-card-header>
            <mat-card-title>{{ note.title }}</mat-card-title>
            <mat-card-subtitle>
                By {{ note.author_name || 'Anonymous' }} &bull; {{ note.created_at | date:'mediumDate' }}
            </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
            <p class="excerpt">{{ note.content | slice:0:150 }}...</p>
        </mat-card-content>
    </mat-card>

    <div *ngIf="notes.length === 0" class="text-center empty-state">
        <mat-icon class="huge-icon">note_stack</mat-icon>
        <p>No notes have been uploaded for this course yet.</p>
        <button mat-stroked-button routerLink="/courses">Browse other courses</button>
    </div>
</div>